<div id="modal" class="modal">
    <div class="modal-content">
        <img id="status-icon" class="status-icon" src="" alt="Status Icon">
        
        <div id="password-prompt" style="display: none;">
            <h2>Это приватное мероприятие</h2>
            <p>Введите пароль для доступа:</p>
            <input type="password" id="event-password" class="search-input">
            <button onclick="checkEventPassword()" class="menu-btn">Продолжить</button>
        </div>
        <!-- Основное содержимое -->
        <div id="event-content">
            <span class="close-btn" onclick="hideModal()">×</span>
            <img id="modal-image" class="modal-image" src="" alt="Изображение мероприятия" style="cursor: pointer">
            <div class="modal-details">
                <div class="modal-header">
                    <h2 id="modal-title"></h2>
                    <button onclick="copyEventLink()" class="share-btn">
                        <img src="/static/images/share-icon.png" class="share-icon" alt="Поделиться">
                        Поделиться
                    </button>
                </div>
                <div class="modal-rating">
                    <strong>Рейтинг:</strong>
                    <span class="star" style="color: #ffa500;">★</span>
                    <span id="modal-average-rating" class="average-rating">Нет оценок</span>
                    <span id="modal-ratings-count" class="ratings-count"></span>
                    
                    <!-- Интерактивные звезды для оценки -->
                    <div class="star-rating interactive" id="modal-star-rating" data-event-id="">
                        <span data-value="1">★</span>
                        <span data-value="2">★</span>
                        <span data-value="3">★</span>
                        <span data-value="4">★</span>
                        <span data-value="5">★</span>
                    </div>
                </div>
                <p id="modal-description"></p>
                <!-- Для офлайн мероприятий -->
                <div id="location-info">
                    <p><strong>Место проведения:</strong> <span id="modal-location-name"></span></p>
                    <p><strong>Адрес:</strong> <span id="modal-location-address"></span></p>
                </div>
                
                <!-- Для онлайн мероприятий -->
                <div id="online-info" style="display: none;">
                    <p><strong>Информация для подключения:</strong> <span id="modal-online-info"></span></p>
                </div>
                
                <p><strong>Теги:</strong> <span id="modal-tags"></span></p>
                <p><strong>Тип мероприятия:</strong> <span id="modal-event-type"></span></p>
                <p><strong>Дата:</strong> <span id="modal-date"></span></p>
                <p><strong>Продолжительность:</strong> <span id="modal-duration"></span></p>
                <p><strong>Формат:</strong> <span id="modal-format"></span></p>
                <p><strong>Организатор:</strong> 
                    <a id="modal-organizer" class="organizer-link" href="#"></a>
                    <span id="modal-organizer-email" style="display: block; margin-top: 5px; font-size: 0.9em;"></span>
                </p>
                <div id="personalities-section">
                    <p><strong>Приглашённые личности:</strong></p>
                    <div id="modal-personalities-list"></div>
                </div>
                <div id="modal-map" class="modal-map"></div>
            </div>
            
            <div class="status-controls">
                <input type="hidden" id="event-id" value="">
                <button class="status-btn" data-status="planned">В планах</button>
                <button class="status-btn" data-status="attended">Посещено</button>
                <button class="status-btn reset-btn" data-status="none">Сбросить</button>
            </div>
            <div class="recommend-section">
                <button onclick="toggleFriendList()" class="menu-btn">Рекомендовать другу</button>
                <div id="friend-list-modal" class="friend-list-modal" style="display: none;">
                    <h3>Выберите друзей</h3>
                    <div id="modal-friends-container" class="friends-container"></div>
                    <button onclick="sendRecommendation()" class="menu-btn">Отправить</button>
                    <button onclick="toggleFriendList()" class="menu-btn">Отмена</button>
                </div>
            </div>
            <div class="comments-section">
                <h3>Комментарии</h3>
                <div id="comment-form">
                    <div class="auth-alert" id="comment-auth-alert">
                        Чтобы оставить комментарий, пожалуйста 
                        <a href="/login" class="auth-link">войдите</a> или 
                        <a href="/register" class="auth-link">зарегистрируйтесь</a>
                    </div>
                    
                    <textarea 
                        id="comment-text" 
                        class="comment-textarea"
                        placeholder="Напишите ваш комментарий..." 
                        rows="4"
                    ></textarea>
                    
                    <div class="comment-controls">
                        <button onclick="handleCommentPost()" class="comment-submit-btn">
                            Отправить
                        </button>
                    </div>
                    <div id="comments-container" class="comments-container"></div>
                </div>
            </div>
        </div>
    </div>
    <input type="hidden" id="modal-event-data" value="">
</div>

<div id="image-modal" class="image-modal">
    <div class="image-container">
        <span class="image-close-btn" onclick="hideImageModal()">×</span>
        <img id="full-size-image" class="full-size-image" src="" alt="Увеличенное изображение">
    </div>
</div>